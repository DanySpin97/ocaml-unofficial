# Copyright 2009 A Frederick Christensen <fauxmight@nosocomia.com>
# Distributed under the terms of the GNU General Public License v2

SUMMARY="Camlp5 is a preprocessor-pretty-printer of OCaml"

HOMEPAGE="http://pauillac.inria.fr/~ddr/camlp5/"
DOWNLOADS="http://pauillac.inria.fr/~ddr/camlp5/distrib/src/${PNV}.tgz"

LICENCES="BSD-3"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS="
    strict [[ description = [ new sytax tree - breaks compatibility with older syntax tree ] ]]
"

DEPENDENCIES="
    build+run:
        dev-lang/ocaml[>=3.08.0&<=3.12.0]
"

BUGS_TO="fauxmight@nosocomia.com"

#DEFAULT_SRC_CONFIGURE_PARAMS=( --hates=docdir )
DEFAULT_SRC_COMPILE_PARAMS=( world.opt )

src_configure() {
    econf\
        $(option strict && echo "--strict" ) \
        $(option !strict && echo "--compatible" )
}
